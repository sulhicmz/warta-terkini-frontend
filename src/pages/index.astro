---
import Layout from '../layouts/Layout.astro';
import Card from '../components/Card.astro';
import { getPosts } from '../lib/wordpress'; // Import fungsi getPosts

const posts = await getPosts(5); // Ambil 5 postingan terbaru

// Log postingan untuk debugging
console.log(posts);
---

<Layout title="Warta Terkini - Berita Terbaru">
    <main class="container mx-auto px-4 py-8">
        <h1 class="text-4xl font-bold text-center text-gray-900 dark:text-white mb-8">Berita Terbaru</h1>

        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            {posts.map((post) => (
                <Card
                    title={post.title.rendered}
                    body={post.excerpt.rendered.replace(/<\/?p>/g, '')} // Hapus tag <p>
                    href={`/artikel/${post.slug}`} // Contoh link ke halaman artikel
                    imgSrc={post._embedded['wp:featuredmedia']?.[0]?.source_url || '/placeholder.jpg'} // Gambar unggulan
                    imgAlt={post._embedded['wp:featuredmedia']?.[0]?.alt_text || post.title.rendered}
                />
            ))}
        </div>
    </main>
</Layout>

<style>
    /* Styling tambahan bisa ditambahkan di sini jika diperlukan */
</style>